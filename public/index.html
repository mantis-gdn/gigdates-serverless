<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gigdates.net - The Revival Begins Soon</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="/main.js" defer></script>
    <script>
        window.toggleMenu = function () {
            const menu = document.getElementById('mobile-menu');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        };
    </script>
</head>
<body>
    <!-- Header Section -->
    <div id="header"></div>

    <!-- Main Content -->
    <div class="hero-section">
        <h1>Experience the Best Live Events</h1>
        <p>From concerts to festivals, discover unforgettable experiences happening.</p>
        <button onclick="window.location.href='/events'">Find Events</button>
    </div>    

    <!-- Footer Section -->
    <div id="footer"></div>
    <script defer>
        (function () {
          const TRACKER_URL = "https://gigdates-tracker.netlify.app/.netlify/functions/track";
      
          const trackEvent = (eventType, eventData = {}) => {
            // Ensure eventData is a simple object with text or meaningful metadata
            const simplifiedEventData = Object.keys(eventData).reduce((acc, key) => {
              if (typeof eventData[key] === "string" || typeof eventData[key] === "number") {
                acc[key] = eventData[key];
              }
              return acc;
            }, {});
      
            const payload = {
              eventType,
              timestamp: new Date().toISOString(),
              url: window.location.href,
              referrer: document.referrer,
            };
      
            console.log("Tracking payload:", payload);
      
            fetch(TRACKER_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            })
              .then((response) => {
                if (!response.ok) {
                  console.error("Server responded with an error:", response.status, response.statusText);
                } else {
                  console.log("Event successfully logged");
                }
              })
              .catch((err) => console.error("Tracking error:", err, TRACKER_URL));
          };
      
          // Automatically track page views
          trackEvent("pageview");
      
          // Track clicks on elements with `data-track` attributes
          document.addEventListener("click", (e) => {
            if (e.target.dataset.track) {
              trackEvent("click", { element: e.target.dataset.track });
            }
          });
        })();
      </script>           
</body>
</html>
